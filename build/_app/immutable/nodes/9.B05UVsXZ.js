import{c as n,s as e,a as l,t as c,$ as re,F as se,f as G,r as o}from"../chunks/disclose-version.D32A8cIq.js";import{p as oe,m as g,X as ne,Y as le,a as ie,g as t,s as p,K as ve,t as D,_ as x,R as ce}from"../chunks/runtime.Cmx-9IxZ.js";import{s as E}from"../chunks/render.Dx_fi2se.js";import{i as w}from"../chunks/if.BqhT6dNd.js";import{e as j,i as q}from"../chunks/each.DoEVNEIz.js";import{h as de}from"../chunks/svelte-head.DsIx1nbp.js";import{a as k}from"../chunks/attributes.MW-2LmP5.js";import{s as pe}from"../chunks/class.CyiKG9oM.js";import{e as A}from"../chunks/events.CQ8HCPju.js";import{i as _e}from"../chunks/lifecycle.DAoeH_GG.js";import{p as me}from"../chunks/props.BR7FjymL.js";import{g as ge,a as fe}from"../chunks/eve_utils.BIi3jUhs.js";var ue=c('<button type="button"><img alt="Event Thumbnail" class="svelte-16zdg5n"> <h2 class="svelte-16zdg5n"> </h2></button>'),he=c('<article class="carousel-container svelte-16zdg5n"></article>'),be=c('<p aria-live="polite">Loading folders...</p>'),ye=c('<p aria-live="polite">No folders found.</p>'),ze=c('<img class="svelte-16zdg5n">'),xe=c('<label for="event_description" class="svelte-16zdg5n">Description <p> </p></label> <label for="event_date" class="svelte-16zdg5n">Date <p> </p></label> <label for="event_location" class="svelte-16zdg5n">Location <p> </p></label>',1),Ee=c('<figure class="carousel-container svelte-16zdg5n"></figure> <!> <button class="ripple-btn svelte-16zdg5n">Close</button>',1),we=c('<p aria-live="polite">Loading gallery images...</p>'),$e=c('<h3 class="svelte-16zdg5n"> </h3> <!>',1),Ge=c(`<main><div class=" head_Line"><h1>WSRD Event Gallery</h1></div> <p class="intro-paragraph svelte-16zdg5n">The bouts are amazing and bring out the best characters. Here are some of the best of them for
		you to check out.</p> <section class="gallery-container svelte-16zdg5n"><!> <div class="under svelte-16zdg5n"><!></div></section></main>`);function He(J,K){oe(K,!1);let L=me(K,"data"),M=L(),S=g(M.supabase),f=g(M.folders),F=g(M.existingEvents),I=g(!1),R=g(""),T=g([]),_=g({event_name:"",event_date:"",location:"",description:"",status_id:"",images:[]});async function Q(r){try{const{data:s,error:i}=await t(S).storage.from("Gallery").list(`bout_photos/${r}`,{limit:100});if(i){console.error("Error fetching gallery details:",i);return}s&&s.length>0?p(T,s.map(d=>ge(`bout_photos/${r}`,d.name))):console.log("No images found in gallery:",r);const a=fe(t(F),r);a?(console.log("Matching event found:",a),p(_,{...t(_),event_name:a.event_name,event_date:new Date(a.event_date).toISOString().slice(0,10),location:a.location,description:a.description,status_id:a.status_id.toString()})):(console.log("No matching event found for this gallery"),p(_,{})),p(R,r),p(I,!0)}catch(s){console.error("Error showing gallery details:",s)}}ne(()=>(t(S),t(f),t(F),ve(L())),()=>{(()=>{const r=L();return p(S,r.supabase),p(f,r.folders),p(F,r.existingEvents),r})()}),le(),_e();var U=Ge();de(r=>{re.title="Event Gallery"});var B=n(U);n(B),o(B);var Z=e(e(B,!0)),O=e(e(Z,!0)),P=n(O);w(P,()=>t(f)&&t(f).length>0,r=>{var s=he();j(s,9,()=>t(f),q,(i,a,d)=>{var v=ue(),u=ce(()=>()=>Q(x(a).name));pe(v,`gallery-item ${(d%2===0?"above":"below")??""} svelte-16zdg5n`);var h=n(v),y=e(e(h,!0)),C=n(y);o(y),o(v),D(()=>{k(v,"aria-label",`View details for ${x(a).name??""}`),k(h,"src",x(a).thumbnailUrl||MeBase),E(C,x(a).name)}),A("click",v,function(...z){var m;return(m=t(u))==null?void 0:m.apply(this,z)},!1),l(i,v)}),o(s),l(r,s)},r=>{var s=se(),i=G(s);w(i,()=>t(f)===void 0,a=>{var d=be();l(a,d)},a=>{var d=ye();l(a,d)},!0),l(r,s)});var V=e(e(P,!0)),N=n(V);w(N,()=>t(I),r=>{var s=$e(),i=G(s),a=n(i);o(i);var d=e(e(i,!0));w(d,()=>t(T).length>0,v=>{var u=Ee(),h=G(u);j(h,9,()=>t(T),q,(z,m,$)=>{var b=ze();D(()=>{k(b,"src",x(m)),k(b,"alt",t(R))}),l(z,b)}),o(h);var y=e(e(h,!0));w(y,()=>t(_).event_name,z=>{var m=xe(),$=G(m),b=e(n($)),ee=n(b);o(b),o($);var H=e(e($,!0)),W=e(n(H)),te=n(W);o(W),o(H);var X=e(e(H,!0)),Y=e(n(X)),ae=n(Y);o(Y),o(X),D(()=>{E(ee,t(_).description),E(te,t(_).event_date),E(ae,t(_).location)}),l(z,m)});var C=e(e(y,!0));A("click",C,()=>p(I,!1),!1),l(v,u)},v=>{var u=we();l(v,u)}),D(()=>E(a,t(R))),l(r,s)}),o(V),o(O),o(U),l(J,U),ie()}export{He as component};
